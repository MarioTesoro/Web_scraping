var currentTitle,currentDuration,currentRating,currentThumb,vKeyAddVideo,menuPosition,createPlaylistModal,menu=null,playlistMenu=document.querySelector(".playlist-option-menu"),playlist_menu_fading=!1,thumbScroll=0,showOverlay=function(e){var t=e.target||e.srcElement,l=t.querySelector(".linkWrapper"),a=t.querySelector(".add-to-playlist-icon"),s=t.querySelector(".not-interested-button"),i=l&&l.querySelector(".playAllLink"),e=l&&l.querySelector(".viewPlaylistLink");l&&(MG_Utils.addClass(l.querySelector(".borderLink"),"hoverPL"),i&&(i.style.display="block"),e&&(e.style.display="block")),a&&!MG_Utils.closest(t,".innerHeaderSubMenu")&&"false"==disablePlaylistPlusButon&&MG_Utils.removeClass(a,"display-none"),(menuPosition=menu?MG_Utils.offset(menu).left:null)&&0<menuPosition&&(MG_Utils.hasClass(menu,"display-none")||MG_Utils.addClass(menu,"display-none"),activePlaylists()),s&&(MG_Utils.removeClass(s.parentNode,"display-none"),MG_Utils.addClass(s,"active"))},hideOverlay=function(e){function t(){s&&!MG_Utils.closest(a,".innerHeaderSubMenu")&&(MG_Utils.hasClass(s.parentNode,"display-none")||(MG_Utils.addClass(s.parentNode,"display-none"),MG_Utils.removeClass(s,"active"))),n&&(MG_Utils.hasClass(n.parentNode,"display-none")||(MG_Utils.addClass(n.parentNode,"display-none"),MG_Utils.removeClass(n,"active"))),i&&(MG_Utils.removeClass(i.querySelector(".borderLink"),"hoverPL"),d&&(d.style.display="none"),c&&(c.style.display="none"))}function l(){menu&&(MG_Utils.hasClass(menu,"display-none")||MG_Utils.addClass(menu,"display-none"),activePlaylists()),MG_Utils.hasClass(a.parentNode,"active")&&MG_Utils.removeClass(a.parentNode,"active")}var a=e.target||e.srcElement,s=a.querySelector(".open-playlist-link"),i=a.querySelector(".linkWrapper"),n=a.querySelector(".not-interested-button"),o=menu?MG_Utils.offset(menu).left:null,r=e.clientX,e=e.clientY,e=document.elementFromPoint(r,e),d=i&&i.querySelector(".playAllLink"),c=i&&i.querySelector(".viewPlaylistLink");menu&&!MG_Utils.closest(a,".innerHeaderSubMenu")&&0<o?MG_Utils.hasClass(e.parentNode,"add-to-playlist-menu")||MG_Utils.closest(e,".add-to-playlist-menu")?menu.addEventListener("mouseleave",function(e){t(),l()}):MG_Utils.hasClass(e.parentNode,"add-to-playlist-menu")||(t(),l()):t()},addToSubmenu=function(t){var e,l=t.target||t.srcElement;playlist_menu_fading=clearTimeout(playlist_menu_fading)&&!1,MG_Utils.hasClass(l,"open-playlist-link")&&(vKeyAddVideo=l.getAttribute("data-video-id"),currentTitle=MG_Utils.nextElementSibling(l.parentNode).querySelector("a").innerHTML,currentDuration=l.parentNode.parentNode.querySelector(".marker-overlays").querySelector(".duration").innerHTML,currentRating=MG_Utils.nextElementSibling(l.parentNode).querySelector(".value")?parseInt(MG_Utils.nextElementSibling(l.parentNode).querySelector(".value").innerHTML)/20:"",currentThumb=MG_Utils.previousElementSibling(l.parentNode).querySelector("img")&&MG_Utils.previousElementSibling(l.parentNode).querySelector("img").getAttribute("data-smallthumb")?MG_Utils.previousElementSibling(l.parentNode).querySelector("img").getAttribute("data-smallthumb"):"",menu||(addToPlayListComponent.create(),addToPlayListComponent.initialize(),menu=document.querySelector(".add-to-playlist-menu")),menu.querySelector(".custom-playlist")&&menu.querySelector(".custom-playlist").querySelectorAll("li").length&&(menu.querySelector("#scrollParent").style.borderBottom="1px solid #313131"),hideShowMenu(l,menu),MG_Utils.hasClass(menu,"fadeOut")&&MG_Utils.removeClass(menu,"fadeOut"),thumbScroll||(MG_Scroll.init({selector:document.querySelectorAll("#scrollThumbs"),height:"auto",color:"#7d7c7c",size:"7px",alwaysVisible:!0,railVisible:!0,railOpacity:1,railColor:"#222",distance:0,opacity:1,railClass:"track4",barClass:"handle4",wrapperClass:"wrapper4"}),thumbScroll=1)),MG_Utils.hasClass(l,"not-interested-button")&&(e=l.getAttribute("data-url"),l={id:l.getAttribute("data-video-id"),value:0,token:l.getAttribute("data-token"),type:l.getAttribute("data-type")},$j.ajax({type:"POST",url:e,data:l,success:function(e){successCallback(e,t)},error:errorCallback}))},addToPlayListComponent={create:function(){var e=document.createElement("custom-add-to-playlist-menu");document.body.insertAdjacentElement("afterbegin",e)},initialize:function(){Vue.customElement("custom-add-to-playlist-menu",{computed:{translatedText:function(){return TRANSLATED_MESSAGE},isLoggedIn:function(){return WIDGET_PLAYLIST_HEADER.isLoggedIn},isLovers:function(){return WIDGET_PLAYLIST_HEADER.isLovers}},methods:{signIn:function(){event.preventDefault(),signinbox.show(textPHTranslation.loginTitlePlaylistAdd)},watchLater:function(){"function"==typeof addToWatchLater&&addToWatchLater(event)},addToLovers:function(){"function"==typeof addToLoversPlaylist&&addToLoversPlaylist(event)},addToPlaylistClick:function(){"function"==typeof addToCustomPL&&addToCustomPL(event)},createNewPlaylist:function(){event.preventDefault(),void 0!==createPlaylistModalComponent&&createPlaylistModalComponent.open(function(){dropdown.init("#playlist-form .privacySelector"),MG_Utils.limit(document.querySelectorAll("#new-playlist-description"),{limit:1e3})})}},mounted:function(){"function"==typeof playlistAppend&&playlistAppend()},template:'<div class="add-to-playlist-menu display-none"><div v-if="isLoggedIn" class="signin"><a href="" @click="signIn">{{translatedText.signIn}}</a>{{translatedText.signInToAdd}}</div><div v-if="!isLoggedIn" class="playlist-menu-addTo"><span>{{translatedText.addToPlaylist}}</span></div><div v-if="!isLoggedIn" class="playlist-list"><div class="quicklick"><a href="" class="watchlater-add" data-type="watchlater" data-video-id="" @click="watchLater">{{translatedText.watchLater}}</a></div><div v-if="isLovers" class="quicklick"><a href="" class="lover-playlist-add" data-type="lovers" data-video-id="" @click="addToLovers">{{translatedText.loversPlaylist}}</a></div><div id="scrollParent"><div id="scrollThumbs" class="blockPageScroll"><ul id="addToPlaylist" class="custom-playlist" @click="addToPlaylistClick"></ul></div></div></div><div v-if="!isLoggedIn" class="playlist-menu-createNew"><a href="" class="createPlaylistModalTrigger" @click="createNewPlaylist">{{translatedText.createPlaylist}}</a></div></div>'})}},createPlaylistModalComponent={open:function(e){var t;void 0===createPlaylistModal&&WIDGET_PLAYLIST_HEADER.showCreatePlaylistModal&&(t=document.createElement("v-create-playlist-modal"),document.body.insertAdjacentElement("afterbegin",t),Vue.customElement("v-create-playlist-modal",{computed:{translatedText:function(){return TRANSLATED_MESSAGE}},mounted:function(){var e=document.getElementById("create-playlist-modal");e&&(createPlaylistModal=new MG_Modal({content:e,className:"createPlaylistContainer"}))},template:'<div id="create-playlist-modal" class="modalWrapper"><div class="playlist-modal"><div class="modal-title">{{translatedText.newPlaylist}}</div><div id="MHP1138-playlist-form"><form autocomplete="off"><div class="error displayNone">{{translatedText.reqInfoError}}</div><label for="MHP1138-new-playlist-title">{{translatedText.title}}</label><input type="text" name="title" id="MHP1138-new-playlist-title" maxlength="35"><div id="tagListBlockModal"><div class="inputHolder"><input class="js-addTagInputModal" id="addTagInputModal" type="text" :placeholder="translatedText.addTagsPlaceHolder"/><input type="hidden" id="js-tagsListModal"/><button class="js-addTagModal buttonBase orangeButton" id="addTagModal">{{translatedText.addTag}}</button></div><div id="tagErrorDisplayModal"></div><ul id="tagListModal" class="tagsHolder"></ul></div><label for="MHP1138-new-playlist-description">{{translatedText.description}}</label><br><textarea name="description" rows="20" cols="20" id="MHP1138-new-playlist-description"></textarea><label for="MHP1138-new-playlist-privacy">{{translatedText.privacy}}</label><div class="filters privacySelector" id="MHP1138-new-playlist-privacy"><div class="dropdownTrigger"><div><span class="textFilter">{{translatedText.publicTxt}}</span><span class="arrowFilters"></span></div><ul class="filterListItem dropdownWrapper"><li data-value="public" class="active"><span>{{translatedText.publicTxt}}</span></li><li data-value="private"><span>{{translatedText.privateTxt}}</span></li></ul></div><input type="hidden"></div><div class="modal-footer clearfix"><input type="submit" name="submit" :value="translatedText.save" id="MHP1138-add-playlist" class="submit-button buttonBase orangeButton"><a class="buttonBase greyButton cancelButton clearModalPlaylist" data-modal="createPlaylist">{{translatedText.cancel}}</a></div></form></div></div></div>'}),document.addEventListener("click",function(e){e.target&&MG_Utils.hasClass(e.target,"clearModalPlaylist")&&"function"==typeof clearModalPlaylist&&clearModalPlaylist()})),void 0!==createPlaylistModal&&("function"==typeof e?createPlaylistModal.openModal(e):createPlaylistModal.openModal())}};MG_Utils.domReady(function(){document.body.addEventListener("mouseenter",function(e){var t=e.target;t&&MG_Utils.hasClass(t,"wrap")&&showOverlay(e)},!0),document.body.addEventListener("mouseleave",function(e){var t=e.target;t&&MG_Utils.hasClass(t,"wrap")&&hideOverlay(e)},!0),document.body.addEventListener("click",function(e){var t=e.target;t&&(MG_Utils.hasClass(t,"open-playlist-link")||MG_Utils.hasClass(t,"not-interested-button"))&&addToSubmenu(e)})});var hideShowMenu=function(e,t){e&&t&&(MG_Utils.hasClass(e,"active")?(MG_Utils.removeClass(e,"active"),MG_Utils.addClass(t,"display-none")):MG_Utils.hasClass(e,"active")||(activePlaylists(),MG_Utils.addClass(e,"active"),MG_Utils.removeClass(t,"display-none"),positionMenu(e,t)))},positionMenu=function(e,t){var l,a;e&&t&&(t.style.top=MG_Utils.offset(e).top+27+"px",t.style.left=MG_Utils.offset(e).left+"px",a=t.getBoundingClientRect(),l=window.innerWidth,(a=t.offsetLeft+t.clientLeft+a.width)&&l<a&&(t.style.top=MG_Utils.offset(e).top+27+"px",t.style.left=MG_Utils.offset(e).left-245+"px"))},playlist_menu_fadeout=function(){playlist_menu_fading=playlist_menu_fading&&(clearTimeout(playlist_menu_fading)&&!1),playlist_menu_fading=setTimeout(function(){MG_Utils.addClass(menu,"fadeOut"),activePlaylists()},2e3)},successCallback=function(e,t){var l;"OK"==e&&t.target&&(e=findAncestor(t.target,"videoBox"),t=findAncestor(t.target,"wrap"),e&&(l=e.querySelector(".not-interested-overlay"),e.style.pointerEvents="none"),t&&(l=t.querySelector(".not-interested-overlay"),t.style.pointerEvents="none"),l&&(l.style.display="block"))};function findAncestor(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}function errorCallback(e,t,l){console.log("something went wrong  "+e+" "+t+" "+l)}var hideSubmenu=function(e){var t=e.target||e.srcElement,e=document.querySelector(".zoom.active");MG_Utils.hasClass(t,"open-playlist-link")||menu&&!MG_Utils.hasClass(menu,"display-none")&&(MG_Utils.closest(t,".add-to-playlist-menu")?activePlaylists():e?MG_Utils.removeClass(e,"active"):(activePlaylists(),MG_Utils.hasClass(menu,"display-none")||MG_Utils.addClass(menu,"display-none"))),playlistMenu&&!MG_Utils.closest(t,".playlist-option-menu")&&t.parentNode!=document.querySelector("#options")&&t!=document.querySelector("#options")&&MG_Utils.addClass(playlistMenu,"display-none")};document.addEventListener("mouseup",hideSubmenu);var activePlaylists=function(e){var t=document.querySelector(".open-playlist-link.active"),l=document.querySelector(".not-interested-button.active");if(void 0===e){if(menu.querySelector(".custom-playlist")&&menu.querySelector(".custom-playlist").querySelectorAll("li").length){var a=menu.querySelector(".custom-playlist").querySelectorAll("li.added, li.alreadyAdded");if(a)for(var s=0;s<a.length;s++){MG_Utils.removeClass(a[s],"added");var i=a[s].querySelector("span");i&&(i.textContent="")}}var n=menu&&menu.querySelector(".quicklick.alreadyAdded"),e=n&&n.querySelector("span");n&&MG_Utils.removeClass(n,"alreadyAdded"),e&&n&&(e.textContent="",n.removeChild(e));n=menu&&menu.querySelector(".quicklick.added"),e=n&&n.querySelector("span");n&&MG_Utils.removeClass(n,"added"),e&&(e.textContent="",n.removeChild(e))}t&&(MG_Utils.removeClass(t,"active"),MG_Utils.addClass(t.parentNode,"display-none")),l&&(MG_Utils.removeClass(l,"active"),MG_Utils.addClass(l.parentNode,"display-none"))},commentsBtn=document.getElementById("commentPlaylist");commentsBtn&&commentsBtn.addEventListener("click",function(e){var t=document.getElementById("videoPlaylist"),l=t&&t.querySelectorAll("li"),a=l&&l.length<=8?1e3:500,l=document.getElementById("cmtPlaylist");t&&MG_Utils.addClass(t,"stopLazyload");l=l&&MG_Utils.offset(l).top;l&&$j("html, body").animate({scrollTop:l},a,function(){setTimeout(function(){t&&MG_Utils.removeClass(t,"stopLazyload")},50)})});var htmlWrapper,isMacLike=navigator.platform.match(/Mac/i);!isMacLike||(htmlWrapper=document.querySelector("html"))&&MG_Utils.addClass(htmlWrapper,"macintosh");