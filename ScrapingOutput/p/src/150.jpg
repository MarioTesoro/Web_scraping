function collapseSuggestions(){"suggestTranslationBox"!==$j(this).attr("id")&&$j(this).is(":visible")&&($j(this).slideUp(),$j(".token-input-dropdown").each(function(){$j(this).is(":visible")&&$j(this).hide()}))}$j("#suggestTranslationSubmit").click(function(){var s=$j(".suggestTranslationInput").val();$j.isEmptyObject(s)?$j("#suggestTranslationResult").html("You need to enter a translation").css("color","red").show().fadeIn():s.length<1||75<s.length?$j("#suggestTranslationResult").html("The translated title needs to be between 1 and 75 characters long.").css("color","red").show().fadeIn():$j.ajax({url:"/video/suggest_translation?vid="+WIDGET_SUGGEST_TRANSLATION.video_id+"&token="+WIDGET_SUGGEST_TRANSLATION.token,type:"POST",dataType:"json",data:{translation:s,id:WIDGET_SUGGEST_TRANSLATION.video_id},success:function(s){s.success?(setCookie("title_translation_"+WIDGET_SUGGEST_TRANSLATION.video_id,s.title,365),$j("#suggestTranslationResult").html(WIDGET_SUGGEST_TRANSLATION.message+' - "'+s.title+'"').css("color","#65a611").show().fadeIn(),$j(".suggestTranslationInput").hide(),$j("#suggestTranslationSubmit").hide()):$j("#suggestTranslationResult").html(WIDGET_SUGGEST_TRANSLATION.errorMsg+' - "'+s.message+'"').css("color","red").show().fadeIn()}})}),$j("#js-languageSelectList > li").on("click",function(){$j("#js-languageText").text($j(this).find("span").text())}),$j(".suggestTranslationToggleBtn").click(function(){ga("send","event","Watch Page","click","Suggest a Title Translation"),$j("#suggestTranslationBox").slideToggle(),$j(this).toggleClass("active"),$j(".CTAs").removeClass("activeCTAs");var s=getCookie("title_translation_"+WIDGET_SUGGEST_TRANSLATION.video_id),t=WIDGET_SUGGEST_TRANSLATION.message;return null==s||""==s?($j(".suggestTranslationInput").val(""),$j(".suggestTranslationInput").show(),$j("#suggestTranslationSubmit").show(),$j("#suggestTranslationResult").hide()):($j(".suggestTranslationInput").val(s),$j(".suggestTranslationInput").hide(),$j("#suggestTranslationSubmit").hide(),$j("#suggestTranslationResult").html(t+' - "'+s+'".').css("color","#65a611").show().fadeIn()),$j(".suggest-mini-box").each(collapseSuggestions),!1}),$j(".suggestToggleAlt").click(function(){return WIDGET_VIDEOS_SHOW_TABS.loggedInUser?ga("send","event","Watch Page","click","Suggest a Title Translation - logged in not a translator"):ga("send","event","Watch Page","click","Suggest a Title Translation - logged out"),$j("#suggestTranslationBox").slideToggle(),$j(this).toggleClass("active"),$j(".CTAs").removeClass("activeCTAs"),$j(".suggest-mini-box").each(collapseSuggestions),!1}),($j(".suggestTranslationToggleBtn").length||$j(".suggestToggleAlt").length)&&$j(".suggestTranslationToggleBtn, .suggestToggleAlt").prevAll("h1.title").addClass("canTranslate"),$j(".js_vote").on("click",function(){var s=$j(this).closest("li"),t=$j(this).hasClass("upVote");s.find(".js_vote").off("click").each(function(){$j(this).css("background-position",$j(this).css("background-position"))}),$j(this).addClass("trigger"+(t?"Up":"Down")),$j.ajax({url:WIDGET_SUGGEST_TRANSLATION.rateUrl,type:"POST",dataType:"json",data:{rating:t?1:0,id:s.attr("id")}})}),document.addEventListener("click",function(s){s=s.target;if(s.matches(".suggest-close")||MG_Utils.hasClass(s,"moreCTAs")||s.parentNode&&MG_Utils.hasClass(s.parentNode,"moreCTAs"))return $j("#suggestTranslationBox").slideUp(),$j(".suggestToggleAlt").removeClass("active"),$j(".suggestTranslationToggleBtn").removeClass("active"),!1},!1);